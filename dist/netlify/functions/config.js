exports.handler=async(e,s)=>{const t={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Content-Type","Access-Control-Allow-Methods":"GET, POST, OPTIONS","Content-Type":"application/json"};if("OPTIONS"===e.httpMethod)return{statusCode:200,headers:t,body:""};try{if("GET"===e.httpMethod){const s=e.queryStringParameters?.siteKey;if(!s)return{statusCode:400,headers:t,body:JSON.stringify({success:!1,error:"缺少站点密钥"})};const r={siteKey:s,theme:"light",size:"normal",challenges:["slider","click","puzzle"],difficulty:"medium",timeout:3e5,allowedDomains:["*"],rateLimit:{requests:100,window:36e5}};return{statusCode:200,headers:t,body:JSON.stringify({success:!0,config:r})}}if("POST"===e.httpMethod){const{siteKey:s,config:r,adminKey:o}=JSON.parse(e.body);return"verigate-admin-key"!==o?{statusCode:403,headers:t,body:JSON.stringify({success:!1,error:"权限不足"})}:(console.log("更新站点配置:",{siteKey:s,config:r}),{statusCode:200,headers:t,body:JSON.stringify({success:!0,message:"配置更新成功"})})}return{statusCode:405,headers:t,body:JSON.stringify({success:!1,error:"不支持的请求方法"})}}catch(e){return console.error("配置API错误:",e),{statusCode:500,headers:t,body:JSON.stringify({success:!1,error:"服务器内部错误"})}}};